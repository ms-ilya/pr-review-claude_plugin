{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://pr-review-plugin/schemas/finding.schema.json",
  "title": "PR Review Finding",
  "description": "Schema for individual findings produced by review agents",
  "type": "object",
  "required": ["severity", "category", "file", "line", "issue"],
  "properties": {
    "severity": {
      "type": "string",
      "enum": ["critical", "warning", "suggestion"],
      "description": "Severity level of the finding"
    },
    "category": {
      "type": "string",
      "description": "Category of the issue (e.g., 'Unused Code', 'Memory Leak', 'DRY Violation')",
      "examples": [
        "Unused Code",
        "Modern Swift",
        "Naming",
        "Force Unwrap",
        "Index Safety",
        "Memory Leak",
        "Race Condition",
        "Logic Error",
        "Data Integrity",
        "DRY Violation",
        "Breaking Change",
        "Breaking Change (Codable)"
      ]
    },
    "file": {
      "type": "string",
      "description": "Path to the file containing the issue"
    },
    "line": {
      "type": "integer",
      "minimum": 1,
      "description": "Line number where the issue occurs"
    },
    "issue": {
      "type": "string",
      "minLength": 10,
      "description": "Clear description of what is wrong"
    },
    "evidence": {
      "type": "string",
      "description": "Code snippet or context showing the issue"
    },
    "fix": {
      "type": "string",
      "description": "Suggested fix or remediation"
    }
  },
  "additionalProperties": false
}
